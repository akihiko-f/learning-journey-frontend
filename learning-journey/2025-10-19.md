# Day 4 - 2025/10/19

## 学んだこと

### 1. 条件付きレンダリング
- 三項演算子を使った表示/非表示の切り替え
- `editingId === todo.id ? 編集モード : 表示モード`
- 編集中のToDoだけ入力欄を表示

### 2. 複数のstateの管理
- `editingId`: 編集中のToDoのIDを管理
- `editingText`: 編集中のテキストを管理
- `null`を使った編集モードの判定

### 3. フラグメント（`<>...</>`）
- 複数の要素をグループ化
- 余計なdivを追加せずにJSXを返せる
- React.Fragmentの省略記法

### 4. autoFocus属性
- 編集モードに入った時、自動的に入力欄にフォーカス
- ユーザビリティの向上

### 5. 基礎概念の復習
- **filter**: 配列から条件に合う要素だけを残す
- **三項演算子**: `条件 ? true時 : false時`
- **スプレッド構文**: `...`で配列やオブジェクトを展開
- **イベントオブジェクト**: `e.target.value`で入力値を取得

## 実装した内容
- ToDoの編集機能
- 編集モードと表示モードの切り替え
- 保存・キャンセルボタン
- 編集・削除・完了ボタンの配置

## 学習メモ

### 条件付きレンダリング
```jsx
{editingId === todo.id ? (
  // 編集モード
  <>
    <input value={editingText} onChange={...} />
    <button onClick={saveEdit}>保存</button>
    <button onClick={cancelEdit}>キャンセル</button>
  </>
) : (
  // 表示モード
  <>
    <span>{todo.text}</span>
    <button onClick={startEdit}>編集</button>
    <button onClick={deleteTodo}>削除</button>
  </>
)}
```

### 編集開始
```jsx
const startEdit = (id, text) => {
  setEditingId(id)        // 編集中のIDを設定
  setEditingText(text)    // 現在のテキストを編集欄に設定
}
```

### 編集を保存
```jsx
const saveEdit = () => {
  if (editingText.trim() !== "") {
    const newTodos = todos.map((todo) => {
      if (todo.id === editingId) {
        return { ...todo, text: editingText }  // テキストだけ更新
      }
      return todo
    })
    setTodos(newTodos)
  }
  setEditingId(null)      // 編集モード解除
  setEditingText("")      // 編集テキストをクリア
}
```

### 編集をキャンセル
```jsx
const cancelEdit = () => {
  setEditingId(null)      // 編集モード解除
  setEditingText("")      // 編集テキストをクリア（変更を破棄）
}
```

## 理解した概念

### nullの使い方
- `editingId`の初期値は`null`（編集していない状態）
- 編集開始時にToDoのIDを設定
- 編集終了時に`null`に戻す

### 条件式での判定
```jsx
editingId === todo.id  // このToDoが編集中か？
```
- `editingId`が`null`の時 → すべてfalse（全て表示モード）
- `editingId`が`1`の時 → ID=1のToDoだけtrue（編集モード）

### mapでの部分更新
```jsx
todos.map((todo) => {
  if (todo.id === editingId) {
    return { ...todo, text: editingText }  // 該当ToDoだけ更新
  }
  return todo  // それ以外はそのまま
})
```

## トラブルシューティング

### 発生したエラー
1. **44行目**: `setEditingText.trim()` → `editingText.trim()`
   - 関数ではなく値をチェック

2. **47行目**: `test: editingText` → `text: editingText`
   - プロパティ名のタイポ

3. **59行目**: `setEditingTest("")` → `setEditingText("")`
   - 関数名のタイポ

### 学んだこと
- タイポに注意（特にsetterとstate変数の混同）
- プロパティ名は正確に（`text` vs `test`）
- 保存が効かない時は、まずstateの更新ロジックを確認
